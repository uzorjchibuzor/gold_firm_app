<%= form_with url: attendances_url, method: "get" do |form| %>
  <%= form.label :date, "Enter any date for the week:  ", class: "mb-2 text-sm font-medium text-gray-700" %>
  <%= form.date_field :date, value: Date.today.to_s, class: "border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
  <%= form.submit "Get Week", class: "mb-5 px-3 py-2 bg-green-600 text-white font-medium text-xs leading-tight rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out" %>
<% end %>

  <table class="w-full mt-5 text-sm text-center rtl:text-right text-gray-500 dark:text-gray-400">
    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark-bg-gray-700 dark:text-gray-400">
      <tr>
        <th scope="col" class="px-6 py-3">Student</th>
        <% @current_week_days.each do |week_day|%>
          <th scope="col" class="px-6 py-3"><%= week_day %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @students.each do |student| %>
        <tr class="odd:bg:white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700 border-gray-200">
          <th scope="row" class="px-6 py-4"><%= student.full_name %></th>
          <% @current_week_days.each do |week_day| %>
            <th><%= @attendances.find { |attendance| attendance.user_id == student.id && attendance.date == week_day }&.status&.titleize || "Not Found"  %></th>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>